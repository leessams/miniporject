# miniporject

# 방탈출게임 
![image]()


### 제작 기간 : 23.9.18 ~ 23.9.23

## 1. 서비스 소개

   ### 서비스 설명:


    1. 방마다의 흰트를 찾아 탈출해야 이기는 게임
    2. 단순하지만 스릴을 즐길 수 있는 게임임.
    3. 간단한 것 같지만 그 안에 구성하기 위해서는 여러 기능과 코드를 구현해 사용하게 함.

# 2. 주요 기능

고객
   - 이미지 오버레이를 통한 본인의 손에 디자인 입히기 기능
   - 원하는 가게의 위치 확인가능
   - 원하는 날짜와 시간에 서비스 예약 가능
   - 가게의 리뷰를 확인가능


가게 관리자
   - 가게 등록 후 썸네일 이미지 업로드 가능
   - 가게의 디자이너 추가 및 삭제 가능
   - 가게의 스케줄 관리 가능


# 3. 사용 언어 및 도구
| 구분         | 내용               |
|--------------|-------------------|
| 사용 언어    | <img src="https://img.shields.io/badge/Java-ED8B00?style=for-the-badge&logo=openjdk&logoColor=white" /> <img src="https://img.shields.io/badge/Python-14354C?style=for-the-badge&logo=python&logoColor=white" /> <img src="https://img.shields.io/badge/HTML-239120?style=for-the-badge&logo=html5&logoColor=white" /> <img src="https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=JavaScript&logoColor=white" /> <img src="https://img.shields.io/badge/CSS-239120?style=for-the-badge&logo=css3&logoColor=white" /> |
| DB  | <img src="https://img.shields.io/badge/Oracle-F80000?style=for-the-badge&logo=oracle&logoColor=black" />|
| Collaboration |<img src="https://i.namu.wiki/i/PJXhYEqwxDj8ck8vHS4zfbrur-ZxVdWSeKTuvAJnoDtLwky1YuZxN0DVu5DYCUwWfITmQGf0gB6km50-Yva3Cg.webp" width="90"> <img src="https://bookface-images.s3.amazonaws.com/logos/1f147b7526b12554a4ea7cd2312a694892459acc.png?1630010761" width="90"> |
| BACK-END  | <img src="https://img.shields.io/badge/Flask-000000?style=for-the-badge&logo=flask&logoColor=white" />  <img src="https://blog.kakaocdn.net/dn/bpMn1w/btqEbuwPNvX/VNyzW4QFj1NGoCuQB3EwG0/img.jpg" height="30">|
| storage   | <img src="https://techrecipe.co.kr/wp-content/uploads/2020/08/200824_Google-Drive_001.jpg" width="100">  |
| 라이브러리| <img src="https://img.shields.io/badge/TensorFlow-FF6F00?style=for-the-badge&logo=tensorflow&logoColor=white" />  <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTTc1aov4a4ONcOBVIXydQjhh5intGt6j8yz5D9vdHe4p-gJAth-jzTUsaMS9cyMpQy66Q&usqp=CAU" width="80">  |
| WebServer    | <img src="https://images.velog.io/images/dbfudgudals/post/2ec0586e-1d62-475d-85c4-0f78b9d2fc34/image.png" width="100">    |
| IDE   | <img src="https://img.shields.io/badge/Eclipse-2C2255?style=for-the-badge&logo=eclipse&logoColor=white" /> |



# 4. 시스템 아키텍처

![화면 캡처 2023-12-07 094825](https://github.com/2023-SMHRD-IS-CLOUD-1/NailArt/assets/142488051/63bbd27a-1574-44ea-8d31-956bd8de377b)



# 5. ER 다이어그램

![image](https://github.com/2023-SMHRD-IS-CLOUD-1/NailArt/assets/105231826/aca3a501-57c0-4f9f-87f8-3b2f2dad1eda)




# 6. 개발 내용




# 7. 화면 구성

<details>
    <summary>화면구성 보기</summary>
<!-- summary 아래 한칸 공백 두고 내용 삽입 -->
   
   #### 메인
   ![메인페이지](https://github.com/2023-SMHRD-IS-CLOUD-1/NailArt/assets/105231826/448c48b2-0c08-4422-afd8-9e390a179352)
   #### 디자인 페이지
   ![image](https://github.com/2023-SMHRD-IS-CLOUD-1/NailArt/assets/105231826/274733a7-53de-449d-87be-b57b98f863e5)
   #### 샵 페이지
   ![샵페이지](https://github.com/2023-SMHRD-IS-CLOUD-1/NailArt/assets/105231826/b67f7711-2f86-450e-a110-a7dc6d68aad7)
   #### 예약 서비스
   ![예약서비스](https://github.com/2023-SMHRD-IS-CLOUD-1/NailArt/assets/105231826/784b26a4-0947-40bd-9713-8e74692237df)
   #### 리뷰 서비스
   ![image](https://github.com/2023-SMHRD-IS-CLOUD-1/NailArt/assets/105231826/0a6acd4c-b60b-4e8e-aefb-5616db61f5f6)

   
</details>


# 8. 참고문헌

- 손톱 검출을 이용한 가상 네일아트문새별* 허훈 오정수 부경대학교
(https://koreascience.kr/article/CFKO202132348467219.pdf)
- 행정안전부
(https://www.localdata.go.kr/main.do)
- 네일 데이터 정보 논문
https://blog.naver.com/PostView.naver?blogId=dbsyhe&logNo=222675412974
- 네일아트 트렌드 기사
https://cosinkorea.com/mobile/article.html?no=48944
- 한국대한 신문
https://news.unn.net/news/articleView.html?idxno=543278




# 9. 개발환경
|                     분류 | 설명                                                              |
|-------------------------:|-------------------------------------------------------------------|
| 운영체제                 | Windows10                                                         |
| 버전 관리 시스템         | Github                                                            |
| 개발 도구                | Eclipse IDE (2023-06), Jupyter notebook, vs code                  |
| 개발 언어 및 프레임 워크 | Java 1.8.0_202, Js, Python 3.11.4, conda 23.7.2                   |
| 데이터 베이스            | ORACLE 11                                                         |
| 하드웨어                 | NVIDIA GeForce RTX 2070,Intel(R) Core(TM) i7-10700 CPU,RAM 16.0GB |



# 10. 팀원소개
| <a href="https://github.com/kkksssmmmm"><img src="https://avatars.githubusercontent.com/u/105231826?v=4" width="100px;" height="100px;" alt=""/><br /><sub><b> 팀장 : 김성민</b></sub></a> | <a href="https://github.com/Jinkyun0328"><img src="https://avatars.githubusercontent.com/u/123911778?v=4" width="100px;" alt=""/><br /><sub><b> 부팀장 : 최진균</b></sub></a> | <a href="https://github.com/ggody2"><img src="https://avatars.githubusercontent.com/u/117277864?v=4" width="100px;" alt=""/><br /><sub><b> 팀원 : 이하연</b></sub></a> | <a href="https://github.com/phc1235"><img src="https://avatars.githubusercontent.com/u/142488051?v=4" width="100px;" alt=""/><br /><sub><b> 팀원 : 박형찬</b></sub></a> | <a href="https://github.com/wannabeMIR"><img src="https://avatars.githubusercontent.com/u/142487984?v=4" width="100px;" alt=""/><br /><sub><b> 팀원 : 김동균</b></sub></a> | <a href="https://github.com/leessams"><img src="https://avatars.githubusercontent.com/u/142474653?v=4" width="100px;" alt=""/><br /><sub><b> 팀원 : 이승호</b></sub></a> |
|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|--------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------|
| 프로젝트 기획                                                                                                                                                                              | 디자인 서비스                                                                                                            | 프론트 디자인 총괄                                                                       | api 수집                                                                                                           | DB 관리                                                                                                               | 로그인서비스                                                                             |
| 전체 일정관리                                                                                                                                                                              | 구글드라이브 연동                                                                                                        | 메인페이지                                                                               | 페이지네이션                                                                                                       | 산출물 작성                                                                                                           | 데이터수집 및 전처리                                                                     |
| fullcanlendar와 faltpickr API를 <br>이용한 예약관리 기능                                                                                                                                       | flask 서버 구축                                                                                                          | 마이페이지                                                                               | 회원가입서비스                                                                                                     | 시연영상                                                                                                              | api 수집                                                                                 |
| 리뷰기능                                                                                                                                                                                   |                                                                                                                          | 가게등록페이지                                                                           | 산출물작성                                                                                                         |                                                                                                                       | 리뷰기능 디자인                                                                          |
| 카카오맵 API를 사용한 위치확인                                                                                                                                                             |                                                                                                                          |                                                                                          |                                                                                                                    |                                                                                                                       |                                                                                          |


# 11. 트러블 슈팅

### 1) 데이터 전처리의 문제
- roboflow segment 과정에서의 라벨링 과정에서 문제를 발견하게 되었습니다.
- 그 문제는 라벨링을 하게 되면 약 150~200장 정도의 사진이 분량이 라벨링이 되어야 하는 점입니다.
- 또한 사진 1장당 손톱 5개의 범위를 클릭하여 범위를 지정하게 되는데 이 작업만도 약 6시간 정도 걸리게 되었습니다.
- 자동으로 누끼를 따주는 프로그램이 있지만 손 & 손톱을 정확하게 분간을 못했습니다.
- 그렇기에 이 데이터 전처리의 문제는 시간이 걸려도 인내와 끈기로 해결하게 되었습니다.

### 2) 통신문제
- flask 서버의 ajax로 통신하면서 지연 발생하는 문제가 있었습니다.
- 비동기 통신인 ajax를 사용하면서 약간의 지연이 발생하게 되었고
  주고 받는 데이터 타입에 따라 코드가 달라져서 오류가 발생하게 되었습니다.
- 그리고 blob 형태 이미지 파일이 json으로 전송되지 않아서 어려움을 겪게 되었습니다.
- 이를 해결한 데에는 ajax를 최대한 겹치지 않게 수행함으로 해결하게 되었고,
- 하나가 완전히 끝난 다음에 다음 요청을 하도록 딜레이나 조건을 걸고 사용해서 해결했습니다.

### 3) 스토리지의 부재 문제
- 네일아트를 다룸에 있어서 이미지가 많이 필요한 부분이 문제였습니다.
- 이는 클라이언트와 서버를 분리해 배포하면 프로젝트의 img폴더에 모두 저장한 상태로 읽게 되어 스토리지의 필요성을 느끼게 되었습니다.
- 그래서 여러 클라우드를 사용하려한 결과 AWS S3인 경우 사용금액이 발생하게 되는 문제가 있었고, 구글 드라이브 API 같은 경우는 파이썬 연결시 오류가 났으며, 코렙에서 구글 드라이브 마운트 사용은 플라스크의 오류가 있어 사용함에 문제점이 있었습니다.
- 그 결과 구글 드라이브에 공유폴더에 파일 업로드로 조치를 취하였고, 공유 폴더의 주소, file_id 를 사용해 출력하고 file_id는 크롤링해 추출하는 방법으로 해결했습니다.

### 4) 코드 통합
- 문제는 기능별로 분배한 역할 때문에 생겼습니다.
- 각자 파일 전송등에서 다른 방식으로 구현함으로 오류가 생기고 수정에 어려움을 겪게 되었습니다.
- 또 설계 단게에서 각 페이지의 설명의 부족이 있었습니다.
- 입출력의 타입, 파일 이름 등 규칙을 다시 정해 해결을 했는데, 미리 시작할 때 해야 한다는 아쉬움이 있었습니다.
- 그리고 구체적인 설계와 기능 설명이 필요하다는 것을 느꼈습니다.

# 12. API
### https://app.roboflow.com/smart-fwoom/nail-8e9wp/deploy/2 - roboflow (딥러닝)                       
### https://flatpickr.js.org/ - 플랫피커 (예약)                   
### https://fullcalendar.io/ - 풀캘린더 (달력)                   
### https://developers.kakao.com/product/map - 카카오맵 (지도)                   



# 13. 파일 설명
### NailProject : 자바 프로젝트                   
### Flask : python 플라스크 서버 데이터                 
### data : 산출물 및 발표자료, 시연영상 등 저장                 

